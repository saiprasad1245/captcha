{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/order.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction OrderComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Payment failed: \", ctx_r1.error, \"\");\n  }\n}\n\nfunction OrderComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Payment Success. Payment ID: \", ctx_r2.paymentId, \"\");\n  }\n}\n\nfunction OrderComponent_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name must be at least 3 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_12_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name must be at most 20 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, OrderComponent_div_12_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(2, OrderComponent_div_12_div_2_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(3, OrderComponent_div_12_div_3_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(11);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.minlength);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.maxlength);\n  }\n}\n\nfunction OrderComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \"Email is required!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Phone is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_24_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Phone must be 10 digits\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, OrderComponent_div_24_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(2, OrderComponent_div_24_div_2_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r7 = i0.ɵɵreference(23);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.errors.minlength || _r7.errors.maxlength);\n  }\n}\n\nfunction OrderComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Amount is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, OrderComponent_div_30_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r9 = i0.ɵɵreference(29);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors.required);\n  }\n}\n\nexport let OrderComponent = /*#__PURE__*/(() => {\n  class OrderComponent {\n    constructor(orderService) {\n      this.orderService = orderService;\n      this.form = {};\n      this.options = {\n        \"key\": \"\",\n        \"amount\": \"\",\n        \"name\": \"Sai Prasad\",\n        \"description\": \"Web Development\",\n        \"image\": \"https://www.captcha.com/wp-content/uploads/2020/02/android-chrome-512x512-1.png\",\n        \"order_id\": \"\",\n        \"handler\": function (response) {\n          var event = new CustomEvent(\"payment.success\", {\n            detail: response,\n            bubbles: true,\n            cancelable: true\n          });\n          window.dispatchEvent(event);\n        },\n        \"prefill\": {\n          \"name\": \"\",\n          \"email\": \"\",\n          \"contact\": \"\"\n        },\n        \"notes\": {\n          \"address\": \"\"\n        },\n        \"theme\": {\n          \"color\": \"#3399cc\"\n        }\n      };\n    }\n\n    onSubmit() {\n      this.paymentId = '';\n      this.error = '';\n      this.orderService.createOrder(this.form).subscribe(data => {\n        this.options.key = data.secretKey;\n        this.options.order_id = data.razorpayOrderId;\n        this.options.amount = data.applicationFee; //paise\n\n        this.options.prefill.name = this.form.name;\n        this.options.prefill.email = this.form.email;\n        this.options.prefill.contact = this.form.phone;\n        var rzp1 = new Razorpay(this.options);\n        rzp1.open();\n        rzp1.on('payment.failed', function (response) {\n          // Todo - store this information in the server\n          console.log(response.error.code);\n          console.log(response.error.description);\n          console.log(response.error.source);\n          console.log(response.error.step);\n          console.log(response.error.reason);\n          console.log(response.error.metadata.order_id);\n          console.log(response.error.metadata.payment_id);\n          this.error = response.error.reason;\n        });\n      }, err => {\n        this.error = err.error.message;\n      });\n    }\n\n    onPaymentSuccess(event) {\n      this.orderService.updateOrder(event.detail).subscribe(data => {\n        this.paymentId = data.message;\n      }, err => {\n        this.error = err.error.message;\n      });\n    }\n\n  }\n\n  OrderComponent.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.OrderService));\n  };\n\n  OrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    hostBindings: function OrderComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"payment.success\", function OrderComponent_payment_success_HostBindingHandler($event) {\n          return ctx.onPaymentSuccess($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 34,\n    vars: 10,\n    consts: [[1, \"col-md-12\"], [1, \"card\", \"card-container\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-group\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", \"role\", \"alert\", 4, \"ngIf\"], [\"for\", \"name\"], [\"type\", \"text\", \"name\", \"name\", \"required\", \"\", \"minlength\", \"3\", \"maxlength\", \"20\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ngModel\"], [\"class\", \"alert-danger\", 4, \"ngIf\"], [\"for\", \"email\"], [\"type\", \"text\", \"name\", \"email\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"for\", \"phone\"], [\"type\", \"number\", \"name\", \"phone\", \"required\", \"\", \"minlength\", \"10\", \"maxlength\", \"10\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"phone\", \"ngModel\"], [\"for\", \"amount\"], [\"type\", \"number\", \"name\", \"amount\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"amount\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\"], [1, \"alert-danger\"], [4, \"ngIf\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r17 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function OrderComponent_Template_form_ngSubmit_2_listener() {\n          i0.ɵɵrestoreView(_r17);\n\n          const _r0 = i0.ɵɵreference(3);\n\n          return _r0.form.valid && ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵtemplate(5, OrderComponent_div_5_Template, 2, 1, \"div\", 5);\n        i0.ɵɵtemplate(6, OrderComponent_div_6_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 4)(8, \"label\", 7);\n        i0.ɵɵtext(9, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.form.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(12, OrderComponent_div_12_Template, 4, 3, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\", 11);\n        i0.ɵɵtext(15, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 12, 13);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.form.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, OrderComponent_div_18_Template, 2, 0, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 4)(20, \"label\", 14);\n        i0.ɵɵtext(21, \"Phone\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 15, 16);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.form.phone = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(24, OrderComponent_div_24_Template, 3, 2, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 4)(26, \"label\", 17);\n        i0.ɵɵtext(27, \"Amount\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 18, 19);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.form.amount = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(30, OrderComponent_div_30_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 4)(32, \"button\", 20);\n        i0.ɵɵtext(33, \"Pay\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(3);\n\n        const _r3 = i0.ɵɵreference(11);\n\n        const _r5 = i0.ɵɵreference(17);\n\n        const _r7 = i0.ɵɵreference(23);\n\n        const _r9 = i0.ɵɵreference(29);\n\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.paymentId);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.form.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r3.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.form.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r5.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.form.phone);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r7.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.form.amount);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r9.invalid);\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm, i3.NgIf, i2.DefaultValueAccessor, i2.RequiredValidator, i2.MinLengthValidator, i2.MaxLengthValidator, i2.NgControlStatus, i2.NgModel, i2.NumberValueAccessor],\n    styles: [\"label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:400px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;border-radius:2px;box-shadow:0 2px 2px #0000004d}\"]\n  });\n  return OrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}